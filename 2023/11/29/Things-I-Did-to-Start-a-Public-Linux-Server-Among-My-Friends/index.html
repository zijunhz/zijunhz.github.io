<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/sheep.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/sheep.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/sheep.png">
  <link rel="mask-icon" href="/images/sheep.png" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Arial:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideUpIn","post_body":"slideUpIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="As CS&#x2F;DS students, we use GNU&#x2F;Linux a lot in our courses! Also, for most projects, we need to work together, share our test cases, and catch bugs efficiently. I happens to noticed that my ISP is provi">
<meta property="og:type" content="article">
<meta property="og:title" content="Things I Did to Start a Public GNU&#x2F;Linux Server Among My Friends">
<meta property="og:url" content="http://example.com/2023/11/29/Things-I-Did-to-Start-a-Public-Linux-Server-Among-My-Friends/index.html">
<meta property="og:site_name" content="zPatronus&#39;s blog">
<meta property="og:description" content="As CS&#x2F;DS students, we use GNU&#x2F;Linux a lot in our courses! Also, for most projects, we need to work together, share our test cases, and catch bugs efficiently. I happens to noticed that my ISP is provi">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-11-30T03:10:16.000Z">
<meta property="article:modified_time" content="2023-11-30T03:46:46.732Z">
<meta property="article:author" content="zPatronus">
<meta property="article:tag" content="Fun Stuff">
<meta property="article:tag" content="Maintenance">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2023/11/29/Things-I-Did-to-Start-a-Public-Linux-Server-Among-My-Friends/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Things I Did to Start a Public GNU/Linux Server Among My Friends | zPatronus's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">zPatronus's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/11/29/Things-I-Did-to-Start-a-Public-Linux-Server-Among-My-Friends/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="zPatronus">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zPatronus's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Things I Did to Start a Public GNU/Linux Server Among My Friends
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-11-29 22:10:16 / Modified: 22:46:46" itemprop="dateCreated datePublished" datetime="2023-11-29T22:10:16-05:00">2023-11-29</time>
            </span>

          
            <div class="post-description">As CS/DS students, we use GNU/Linux a lot in our courses! Also, for most projects, we need to work together, share our test cases, and catch bugs efficiently. I happens to noticed that my ISP is providing a static public IP to my home network. So, I utilizes that and the Raspberry Pi 3B+ I brought from China to the US to open a public server for my friends.</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="0-Create-2-users"><a href="#0-Create-2-users" class="headerlink" title="0. Create 2 users"></a>0. Create 2 users</h2><p>An admin user and a public user <code>pub</code>.</p>
<p>Since there’s no malicious guys in my friends, I’m not preparing to create an account for each of them. Rather, they will be logged in to a same public account. It also enforces them to store only public content in this server, or they really want their “dark secrets” to be seen. It’s just a Raspberry Pi 3B+ with 1GB of RAM and 16GB of storage. Not a lot of computer juice here.</p>
<h2 id="1-Notice-board-and-readme-system"><a href="#1-Notice-board-and-readme-system" class="headerlink" title="1. Notice board and readme system"></a>1. Notice board and readme system</h2><p>I heavily modified the <code>~/.bashrc</code> to do the following 2 things:</p>
<ol>
<li>Whenever a bash session is created, <code>~/.news</code> will be catted to print the news (modifications to the server or newly uploaded files).</li>
<li>Whenever <code>cd</code> is called to a directory with a <code>README.txt</code> in it, the <code>README.txt</code> will be catted to print info about that directory.</li>
</ol>
<p>Trust me. Even they are my friends, I gets annoyed when they keep asking me the same question (like “wtf, <code>rsync pub@xx.xx.xx.xx:/path/to/dir/or/files /path/to/local/dir/</code>“ does not sync <code>~/281p4/*</code> on the server to my disk). I put these things to the notice board and <code>README.txt</code>.</p>
<h2 id="2-SSH-auth-protection"><a href="#2-SSH-auth-protection" class="headerlink" title="2. SSH auth protection"></a>2. SSH auth protection</h2><p>Since all of my friends are able to log in to <code>pub</code>, they can potentially modify <code>~/.ssh/authorized_keys</code>, which I don’t want to happen.</p>
<p>In the admin account, I add a start-up script which will start all custom scripts.</p>
<p>One of the customized script copies a valid <code>authorized_keys</code> to <code>pub</code> every 1 min to secure that.</p>
<h2 id="3-Source-file-cleaning"><a href="#3-Source-file-cleaning" class="headerlink" title="3. Source file cleaning"></a>3. Source file cleaning</h2><p>The purpose of this server is never to exchange project answers, aka source codes. A source file cleaning scripts runs every 3 mins to remove all source files by matching extensions. This will be bypassed if one simply change the file extension, but if they really want to exchange source, they can use other platforms and this server is definitely not the best option. The main purpose of this function is to take care of source files that are compiled and executed on the server, but are not removed in time.</p>
<h2 id="4-oh-my-posh"><a href="#4-oh-my-posh" class="headerlink" title="4. oh-my-posh"></a>4. oh-my-posh</h2><p>That is a must have. In <code>.bashrc</code> I set it up so that a random theme is used every time a session starts.</p>
<h2 id="5-System-status-monetization"><a href="#5-System-status-monetization" class="headerlink" title="5. System status monetization"></a>5. System status monetization</h2><p>A nginx server is created to host several webpages that display the system’s status.  </p>
<p>Status includes CPU load, CPU temperature, file tree under <code>~</code>, and login count from different people.</p>
<p>The login count is achieved by parsing <code>/var/log/auth.log</code> and match SHA256 of every ssh keys to one in the <code>~/.ssh/authorized_keys</code>.</p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Fun-Stuff/" rel="tag"><i class="fa fa-tag"></i> Fun Stuff</a>
              <a href="/tags/Maintenance/" rel="tag"><i class="fa fa-tag"></i> Maintenance</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/01/28/A-Wish-Posting-and-Realizing-Platform/" rel="prev" title="A Wish Posting and Realizing Platform">
      <i class="fa fa-chevron-left"></i> A Wish Posting and Realizing Platform
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-Create-2-users"><span class="nav-number">1.</span> <span class="nav-text">0. Create 2 users</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Notice-board-and-readme-system"><span class="nav-number">2.</span> <span class="nav-text">1. Notice board and readme system</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-SSH-auth-protection"><span class="nav-number">3.</span> <span class="nav-text">2. SSH auth protection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Source-file-cleaning"><span class="nav-number">4.</span> <span class="nav-text">3. Source file cleaning</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-oh-my-posh"><span class="nav-number">5.</span> <span class="nav-text">4. oh-my-posh</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-System-status-monetization"><span class="nav-number">6.</span> <span class="nav-text">5. System status monetization</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zPatronus"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">zPatronus</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://zpatronus.top/" title="https:&#x2F;&#x2F;zpatronus.top&#x2F;" rel="noopener" target="_blank">zPatronus' Site</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://github.com/zijunhz/" title="https:&#x2F;&#x2F;github.com&#x2F;zijunhz&#x2F;" rel="noopener" target="_blank">zPatronus' Github</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zPatronus</span>
</div>



        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'dark',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  



  

</body>
</html>
